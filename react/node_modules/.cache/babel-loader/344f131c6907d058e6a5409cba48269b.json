{"ast":null,"code":"import _classCallCheck from \"/Users/GAMEHERO/Desktop/2DV603/\\u6700\\u540E\\u7684\\u4F5C\\u4E1A/2DV603-master/react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/GAMEHERO/Desktop/2DV603/\\u6700\\u540E\\u7684\\u4F5C\\u4E1A/2DV603-master/react/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/GAMEHERO/Desktop/2DV603/\\u6700\\u540E\\u7684\\u4F5C\\u4E1A/2DV603-master/react/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/GAMEHERO/Desktop/2DV603/\\u6700\\u540E\\u7684\\u4F5C\\u4E1A/2DV603-master/react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/GAMEHERO/Desktop/2DV603/\\u6700\\u540E\\u7684\\u4F5C\\u4E1A/2DV603-master/react/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/GAMEHERO/Desktop/2DV603/\\u6700\\u540E\\u7684\\u4F5C\\u4E1A/2DV603-master/react/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/GAMEHERO/Desktop/2DV603/\\u6700\\u540E\\u7684\\u4F5C\\u4E1A/2DV603-master/react/src/Member/Edit.js\";\nimport React from 'react';\nimport Config from '../config';\nimport Utils from '../utils';\nimport './Edit.css';\nimport Sider from \"../Public/Sider\";\nimport Header from \"../Public/Header\";\n\nvar Edit =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Edit, _React$Component);\n\n  function Edit(props) {\n    var _this;\n\n    _classCallCheck(this, Edit);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Edit).call(this, props));\n    document.title = 'Member Edit';\n\n    var $this = _assertThisInitialized(_assertThisInitialized(_this));\n\n    $this.state = {\n      memberCopy: {},\n      member: {\n        username: '',\n        email: '',\n        group: '',\n        groupObj: {}\n      },\n      id: props.match.params.id\n    };\n    Utils.checkMember(function (res) {\n      if (res.group !== 1 && res.id !== parseInt($this.state.id)) {\n        Utils.alert('Access denied', function () {\n          window.location.href = Utils.url('index-show');\n        });\n        return false;\n      } else if (res.group === 1) {\n        Utils.request(Config.requestUrl + Utils.requestUrl('member-readById'), 'id=' + $this.state.id, function (member) {\n          $this.setState({\n            member: member,\n            memberCopy: res\n          });\n        });\n      } else {\n        $this.setState({\n          member: res,\n          memberCopy: res\n        });\n      }\n    });\n    return _this;\n  }\n\n  _createClass(Edit, [{\n    key: \"input\",\n    value: function input(e) {\n      e.preventDefault();\n      var member = this.state.member;\n      e = e.target;\n      member[e.name] = e.value;\n      this.setState({\n        member: member\n      });\n    }\n  }, {\n    key: \"submit\",\n    value: function submit(e) {\n      e.preventDefault();\n      var postdata = this.state.member;\n      postdata.cookie = Utils.getLoginCookie();\n      Utils.request(Config.requestUrl + Utils.requestUrl('member-edit'), Utils.jsonToForm(postdata), function (res) {\n        Utils.alert(res);\n      }, function (msg) {\n        Utils.alert(msg);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var member = this.state.member;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(Sider, {\n        member: this.state.memberCopy,\n        active1: \"Manage Member\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }), React.createElement(Header, {\n        title1: null,\n        title2: \"Manage Member\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"wrap member-edit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, \"MemberName:\"), React.createElement(\"div\", {\n        className: \"value\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, member.membername)), React.createElement(\"div\", {\n        className: \"item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, \"Group:\"), React.createElement(\"div\", {\n        className: \"value\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, member.groupObj.name)), React.createElement(\"div\", {\n        className: \"item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, \"RealName:\"), React.createElement(\"div\", {\n        className: \"value\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, member.realName)), React.createElement(\"div\", {\n        className: \"item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, \"Email:\"), React.createElement(\"div\", {\n        className: \"value\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"form-control\",\n        value: member.email,\n        name: \"email\",\n        onChange: this.input.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, \"Password:\"), React.createElement(\"div\", {\n        className: \"value\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"form-control\",\n        value: member.password || '',\n        name: \"password\",\n        type: \"password\",\n        onChange: this.input.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }))), React.createElement(\"button\", {\n        className: \"btn btn-success\",\n        onClick: this.submit.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, \"Submit\")));\n    }\n  }]);\n\n  return Edit;\n}(React.Component);\n\nexport default Edit;","map":{"version":3,"sources":["/Users/GAMEHERO/Desktop/2DV603/最后的作业/2DV603-master/react/src/Member/Edit.js"],"names":["React","Config","Utils","Sider","Header","Edit","props","document","title","$this","state","memberCopy","member","username","email","group","groupObj","id","match","params","checkMember","res","parseInt","alert","window","location","href","url","request","requestUrl","setState","e","preventDefault","target","name","value","postdata","cookie","getLoginCookie","jsonToForm","msg","membername","realName","input","bind","password","submit","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\n\r\nimport Config from '../config';\r\nimport Utils from '../utils';\r\nimport './Edit.css';\r\nimport Sider from \"../Public/Sider\";\r\nimport Header from \"../Public/Header\";\r\n\r\nclass Edit extends React.Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n        document.title = 'Member Edit';\r\n        let $this = this;\r\n        $this.state = {\r\n            memberCopy: {},\r\n            member: {username: '', email: '', group:'', groupObj: {}},\r\n            id: props.match.params.id\r\n        };\r\n        Utils.checkMember(function(res){\r\n            if(res.group!==1 && res.id!==parseInt($this.state.id)){\r\n                Utils.alert('Access denied', function(){\r\n                    window.location.href = Utils.url('index-show');\r\n                });\r\n                return false;\r\n            }else if(res.group===1){\r\n                Utils.request(Config.requestUrl+Utils.requestUrl('member-readById'), 'id='+$this.state.id, function(member){\r\n                    $this.setState({\r\n                        member: member,\r\n                        memberCopy: res\r\n                    })\r\n                })\r\n            }else{\r\n                $this.setState({\r\n                    member: res,\r\n                    memberCopy: res\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    input(e){\r\n        e.preventDefault();\r\n        let member = this.state.member;\r\n        e = e.target;\r\n        member[e.name] = e.value;\r\n        this.setState({\r\n            member: member\r\n        });\r\n    }\r\n\r\n    submit(e){\r\n        e.preventDefault();\r\n        let postdata = this.state.member;\r\n        postdata.cookie = Utils.getLoginCookie();\r\n        Utils.request(Config.requestUrl+Utils.requestUrl('member-edit'), Utils.jsonToForm(postdata), function(res){\r\n            Utils.alert(res);\r\n        }, function(msg){\r\n            Utils.alert(msg);\r\n        });\r\n    }\r\n\r\n    render(){\r\n        let member = this.state.member;\r\n        return (\r\n            <div>\r\n                <Sider member={this.state.memberCopy} active1=\"Manage Member\"></Sider>\r\n                <Header title1={null} title2=\"Manage Member\"></Header>\r\n\r\n                <div className=\"wrap member-edit\">\r\n                    <div className=\"item\">\r\n                        <div className=\"title\">MemberName:</div>\r\n                        <div className=\"value\">{member.membername}</div>\r\n                    </div>\r\n                    <div className=\"item\">\r\n                        <div className=\"title\">Group:</div>\r\n                        <div className=\"value\">{member.groupObj.name}</div>\r\n                    </div>\r\n                    <div className=\"item\">\r\n                        <div className=\"title\">RealName:</div>\r\n                        <div className=\"value\">{member.realName}</div>\r\n                    </div>\r\n                    <div className=\"item\">\r\n                        <div className=\"title\">Email:</div>\r\n                        <div className=\"value\">\r\n                            <input className=\"form-control\" value={member.email} name=\"email\" onChange={this.input.bind(this)} />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"item\">\r\n                        <div className=\"title\">Password:</div>\r\n                        <div className=\"value\">\r\n                            <input className=\"form-control\" value={member.password || ''} name=\"password\" type=\"password\" onChange={this.input.bind(this)} />\r\n                        </div>\r\n                    </div>\r\n                    <button className=\"btn btn-success\" onClick={this.submit.bind(this)}>Submit</button>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Edit;\r\n"]},"metadata":{},"sourceType":"module"}