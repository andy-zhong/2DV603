{"ast":null,"code":"import _classCallCheck from \"/Users/GAMEHERO/Desktop/2DV603/\\u6700\\u540E\\u7684\\u4F5C\\u4E1A/2DV603-master/react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/GAMEHERO/Desktop/2DV603/\\u6700\\u540E\\u7684\\u4F5C\\u4E1A/2DV603-master/react/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/GAMEHERO/Desktop/2DV603/\\u6700\\u540E\\u7684\\u4F5C\\u4E1A/2DV603-master/react/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/GAMEHERO/Desktop/2DV603/\\u6700\\u540E\\u7684\\u4F5C\\u4E1A/2DV603-master/react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/GAMEHERO/Desktop/2DV603/\\u6700\\u540E\\u7684\\u4F5C\\u4E1A/2DV603-master/react/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/GAMEHERO/Desktop/2DV603/\\u6700\\u540E\\u7684\\u4F5C\\u4E1A/2DV603-master/react/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/GAMEHERO/Desktop/2DV603/\\u6700\\u540E\\u7684\\u4F5C\\u4E1A/2DV603-master/react/src/Supervisor/List.js\";\nimport React from 'react';\nimport Utils from '../utils';\nimport './List.css';\nimport Header from '../Public/Header';\nimport Sider from '../Public/Sider';\nimport Config from \"../config\";\n\nvar List =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(List, _React$Component);\n\n  function List(props) {\n    var _this;\n\n    _classCallCheck(this, List);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(List).call(this, props));\n    document.title = 'Supervisor List';\n\n    var $this = _assertThisInitialized(_assertThisInitialized(_this));\n\n    $this.state = {\n      member: {\n        groupObj: {}\n      },\n      list: [],\n      student: []\n    };\n    Utils.checkMember(function (res) {\n      $this.setState({\n        member: res\n      });\n      var postdata = {};\n      postdata.cookie = Utils.getLoginCookie();\n      postdata.group = 'supervisor';\n      Utils.request(Config.requestUrl + Utils.requestUrl('member-list'), Utils.jsonToForm(postdata), function (res) {\n        $this.setState({\n          list: res\n        });\n        var student = $this.state.student;\n        var requestCount = res.length;\n\n        var _loop = function _loop(i) {\n          Utils.request(Config.requestUrl + Utils.requestUrl('member-studentListOfSupervisor'), 'id=' + res[i].id, function (m) {\n            student[i] = m;\n            requestCount--;\n          });\n        };\n\n        for (var i = 0; i < res.length; i++) {\n          _loop(i);\n        }\n\n        var interval = setInterval(function () {\n          if (requestCount <= 0) {\n            $this.setState({\n              student: student\n            });\n            clearInterval(interval);\n          }\n        }, 100);\n      });\n    });\n    return _this;\n  }\n\n  _createClass(List, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var member = this.state.member;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, React.createElement(Sider, {\n        member: member,\n        active1: \"Manage Member\",\n        active2: \"Supervisor List\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }), React.createElement(Header, {\n        title1: \"Manage Member\",\n        title2: \"Supervisor List\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"wrap\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, React.createElement(\"table\", {\n        className: \"table table-hover\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, \"Supervisor name\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, \"Email address\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, \"Supervising Student\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, \"Operation\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, this.state.list.map(function (l, k) {\n        return React.createElement(\"tr\", {\n          key: k,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72\n          },\n          __self: this\n        }, l.membername), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        }, l.email), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74\n          },\n          __self: this\n        }, _this2.state.student[k] && _this2.state.student[k].length > 0 ? _this2.state.student[k].map(function (s, k2) {\n          return React.createElement(\"span\", {\n            key: k2,\n            className: \"apply-item\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 76\n            },\n            __self: this\n          }, s.membername);\n        }) : 'None'), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        }, member.group === 1 ? React.createElement(\"a\", {\n          href: Utils.url('member-edit-' + l.id),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        }, \"Edit\") : member.group === 3 ? React.createElement(\"a\", {\n          href: Utils.url('submission-submit-plan') + '?id=' + l.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }, \"Apply\") : 'None'));\n      })))));\n    }\n  }]);\n\n  return List;\n}(React.Component);\n\nexport default List;","map":{"version":3,"sources":["/Users/GAMEHERO/Desktop/2DV603/最后的作业/2DV603-master/react/src/Supervisor/List.js"],"names":["React","Utils","Header","Sider","Config","List","props","document","title","$this","state","member","groupObj","list","student","checkMember","res","setState","postdata","cookie","getLoginCookie","group","request","requestUrl","jsonToForm","requestCount","length","i","id","m","interval","setInterval","clearInterval","map","l","k","membername","email","s","k2","url","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Utils from '../utils';\r\nimport './List.css';\r\n\r\nimport Header from '../Public/Header'\r\nimport Sider from '../Public/Sider'\r\nimport Config from \"../config\";\r\n\r\nclass List extends React.Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n        document.title = 'Supervisor List';\r\n        let $this = this;\r\n        $this.state = {\r\n            member: {groupObj: {}},\r\n            list: [],\r\n            student: []\r\n        };\r\n        Utils.checkMember(function(res){\r\n            $this.setState({\r\n                member: res\r\n            });\r\n            let postdata = {};\r\n            postdata.cookie = Utils.getLoginCookie();\r\n            postdata.group = 'supervisor';\r\n            Utils.request(Config.requestUrl+Utils.requestUrl('member-list'), Utils.jsonToForm(postdata), function(res){\r\n                $this.setState({\r\n                    list: res\r\n                });\r\n                let student = $this.state.student;\r\n                let requestCount = res.length;\r\n                for(let i=0; i<res.length; i++){\r\n                    Utils.request(Config.requestUrl+Utils.requestUrl('member-studentListOfSupervisor'), 'id='+res[i].id, function(m){\r\n                        student[i] = m;\r\n                        requestCount--;\r\n                    })\r\n                }\r\n                let interval = setInterval(function(){\r\n                    if(requestCount<=0){\r\n                        $this.setState({\r\n                            student: student\r\n                        })\r\n                        clearInterval(interval);\r\n                    }\r\n                }, 100);\r\n            });\r\n        });\r\n    }\r\n\r\n    render(){\r\n        let member = this.state.member;\r\n        return (\r\n            <div>\r\n                <Sider member={member} active1=\"Manage Member\" active2=\"Supervisor List\"></Sider>\r\n                <Header title1=\"Manage Member\" title2=\"Supervisor List\"></Header>\r\n\r\n                <div className=\"wrap\">\r\n\r\n                    <table className=\"table table-hover\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>Supervisor name</th>\r\n                                <th>Email address</th>\r\n                                <th>Supervising Student</th>\r\n                                <th>Operation</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                        {this.state.list.map((l, k)=>{\r\n                            return <tr key={k}>\r\n                                <td>{l.membername}</td>\r\n                                <td>{l.email}</td>\r\n                                <td>\r\n                                    {this.state.student[k] && this.state.student[k].length>0?this.state.student[k].map((s, k2)=>{\r\n                                        return <span key={k2} className=\"apply-item\">{s.membername}</span>\r\n                                    }):'None'}\r\n                                </td>\r\n                                <td>\r\n                                    {member.group === 1 ?\r\n                                        <a href={Utils.url('member-edit-'+l.id)}>Edit</a>:\r\n                                        (member.group === 3 ? <a href={Utils.url('submission-submit-plan') + '?id=' + l.id}>Apply</a>:'None')\r\n                                    }\r\n                                </td>\r\n                            </tr>\r\n                        })}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default List;\r\n"]},"metadata":{},"sourceType":"module"}